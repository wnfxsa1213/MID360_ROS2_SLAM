# 地图精细化工具配置参数调整指南

## 概述

本指南帮助操作人员根据实际需求调整地图精细化工具的参数，以获得最佳的处理效果。

## 快速调整建议

### 🔧 常见场景参数设置

#### 1. 高精度处理（质量优先）
```yaml
# 适用于：精密建图、重要区域扫描
noise_reduction:
  statistical_outlier:
    mean_k: 30
    std_dev_mul_thresh: 1.5
  radius_outlier:
    radius: 0.2
    min_neighbors: 5

normal_icp:
  max_iterations: 80
  convergence_threshold: 1e-7

surface_reconstruction:
  poisson_depth: 11
```

#### 2. 快速处理（速度优先）
```yaml
# 适用于：大范围扫描、预览处理
noise_reduction:
  statistical_outlier:
    mean_k: 15
    std_dev_mul_thresh: 2.5
  radius_outlier:
    radius: 0.4
    min_neighbors: 2

normal_icp:
  max_iterations: 30
  convergence_threshold: 1e-5

surface_reconstruction:
  poisson_depth: 7
```

#### 3. 平衡模式（推荐）
```yaml
# 适用于：一般室内建图
# 使用默认配置即可
```

### 🎯 针对性问题解决

#### 问题1：处理后点云过于稀疏
**原因：** 去噪参数过于严格
**解决方案：**
```yaml
noise_reduction:
  statistical_outlier:
    std_dev_mul_thresh: 3.0  # 增大到3.0
  radius_outlier:
    radius: 0.5              # 增大搜索半径
    min_neighbors: 2         # 减少邻居要求
```

#### 问题2：处理时间过长
**原因：** 算法参数设置过高
**解决方案：**
```yaml
normal_icp:
  max_iterations: 30         # 减少迭代次数

surface_reconstruction:
  poisson_depth: 8           # 降低重建精度

performance:
  num_threads: 6             # 增加线程数
```

#### 问题3：边缘特征不够清晰
**原因：** 边缘增强参数过低
**解决方案：**
```yaml
edge_enhancer:
  curvature_threshold: 0.05  # 降低阈值
  edge_weight_multiplier: 3.0 # 增加权重

detail_preservation:
  edge_sensitivity: 0.9      # 提高敏感度
```

#### 问题4：墙面不够平整
**原因：** 平面保护参数过宽松
**解决方案：**
```yaml
plane_preserver:
  ransac_distance_threshold: 0.015  # 降低阈值
  min_plane_points: 150             # 增加最小点数

geometry_optimizer:
  constraint_weight: 0.7            # 增加约束权重
```

## 📊 参数调整原则

### 通用规则
1. **数值越大 = 效果越强 + 处理时间越长**
2. **数值越小 = 处理越快 + 可能丢失细节**

### 调整步骤
1. **先备份原始配置文件**
2. **根据场景选择基础设置**
3. **针对具体问题微调参数**
4. **测试验证效果**
5. **保存最佳配置**

## 🚨 注意事项

### 内存和性能
- `memory_limit_gb`: 不要超过系统可用内存的80%
- `num_threads`: 建议为CPU核心数的50-75%
- 大文件处理时适当降低精度参数

### 参数相互影响
- 去噪参数影响后续所有处理步骤
- 表面重建深度直接影响最终质量
- 约束权重过大可能导致过度规整化

### 调试技巧
- 开启 `save_intermediate_results` 查看中间结果
- 使用 `quality_report` 分析处理效果
- 从简单场景开始调试参数

## 📞 技术支持

如遇到参数调整问题，请提供：
1. 输入点云特征（大小、密度、场景类型）
2. 期望的处理效果
3. 当前使用的参数配置
4. 遇到的具体问题描述

---
*最后更新：2025-09-20*